<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <title>Stencil Starter App</title>
    <meta name="Description" content="LocalCloudOS"> <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"> <meta name="theme-color" content="#16161d"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="x-ua-compatible" content="IE=Edge">
    <script
      type="module"
      src="/js/app.esm.js"
      data-stencil></script>
    <script
      nomodule=""
      src="/js/app.js"
      data-stencil></script>
    <link href="/js/app.css" rel="stylesheet"> <link rel="apple-touch-icon" href="/assets/icon/icon.png"> <link
      rel="icon"
      type="image/x-icon"
      href="/assets/icon/favicon.ico"> <link rel="manifest" href="/manifest.json">
  </head>
  <body>
    <input
      type="hidden"
      name="token"
      value="{{ token }}">
    <input
      type="hidden"
      name="key"
      value="{{ key }}">
    <ion-app>
      <ion-header>
        <ion-toolbar>
          <ion-title>Instalación</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content fullscreen>
        <ion-grid>
          <ion-row>
            <ion-col
              size="12"
              offset-sm="3"
              size-sm="6"
              offset-lg="4"
              size-lg="4">
              <ion-list inset>
                <ion-item>
                  <ion-input
                    label="Nombre completo"
                    label-placement="floating"
                    type="text"
                    value="Rodrigo Cid"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-input
                    label="Nombre de usuario"
                    label-placement="floating"
                    type="text"
                    value="rcid"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-input
                    label="Contraseña"
                    label-placement="floating"
                    type="password"
                    value="A.1b2c3d4"></ion-input>
                </ion-item>
              </ion-list>
              <div class="ion-padding">
                <ion-button expand="block" class="ion-no-margin">Instalar</ion-button>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-content>
    </ion-app>
    <script>
      document.addEventListener('onReady', () => {
        const inputs = document.body.querySelectorAll('ion-input')
        const fullNameRef = inputs.item(0)
        const userNameRef = inputs.item(1)
        const passwordRef = inputs.item(2)
        const buttonRef = document.body.querySelector('ion-button')
        buttonRef.addEventListener('click', async () => {
          const data = {
            fullName: fullNameRef.value,
            userName: userNameRef.value,
            password: passwordRef.value
          }
          if (!Object.values(data).includes('')) {
            await(await window.loadingController.create({ message: 'Instalando ...' })).present()
            await window.server.send({
              method: 'post',
              endpoint: 'api/install',
              data
            })
            window.location.reload()
          }
        })
      })
    </script>
  </body>
</html>