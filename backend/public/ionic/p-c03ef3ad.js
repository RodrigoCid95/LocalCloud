import{g as n,c as o}from"./p-c57c31a3.js";import{OVERLAY_BACK_BUTTON_PRIORITY as t}from"./p-add30d46.js";import{c as e,a as i,f as s,r as d,g as a}from"./p-f08587bc.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let r=0;const c=new WeakMap;const u=n=>({create(o){return w(n,o)},dismiss(o,t,e){return A(document,o,t,n,e)},async getTop(){return T(document,n)}});const l=u("ion-alert");const f=u("ion-action-sheet");const p=u("ion-loading");const v=u("ion-modal");const m=u("ion-picker");const b=u("ion-popover");const h=u("ion-toast");const y=n=>{if(typeof document!=="undefined"){P(document)}const o=r++;n.overlayIndex=o;if(!n.hasAttribute("id")){n.id=`ion-overlay-${o}`}};const w=(n,o)=>{if(typeof window!=="undefined"&&typeof window.customElements!=="undefined"){return window.customElements.whenDefined(n).then((()=>{const t=document.createElement(n);t.classList.add("overlay-hidden");Object.assign(t,Object.assign(Object.assign({},o),{hasController:true}));I(document).appendChild(t);return new Promise((n=>e(t,n)))}))}return Promise.resolve()};const x='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])';const g=(n,o)=>{let t=n.querySelector(x);const e=t===null||t===void 0?void 0:t.shadowRoot;if(e){t=e.querySelector(x)||t}if(t){s(t)}else{o.focus()}};const k=n=>n.classList.contains("overlay-hidden");const j=(n,o)=>{const t=Array.from(n.querySelectorAll(x));let e=t.length>0?t[t.length-1]:null;const i=e===null||e===void 0?void 0:e.shadowRoot;if(i){e=i.querySelector(x)||e}if(e){e.focus()}else{o.focus()}};const O=(n,o)=>{const t=T(o,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover");const e=n.target;if(!t||!e){return}if(t.classList.contains("ion-disable-focus-trap")){return}const i=()=>{if(t===e){t.lastFocus=undefined}else{const n=a(t);if(!n.contains(e)){return}const i=n.querySelector(".ion-overlay-wrapper");if(!i){return}if(i.contains(e)){t.lastFocus=e}else{const n=t.lastFocus;g(i,t);if(n===o.activeElement){j(i,t)}t.lastFocus=o.activeElement}}};const s=()=>{if(t.contains(e)){t.lastFocus=e}else{const n=t.lastFocus;g(t,t);if(n===o.activeElement){j(t,t)}t.lastFocus=o.activeElement}};if(t.shadowRoot){s()}else{i()}};const P=n=>{if(r===0){r=1;n.addEventListener("focus",(o=>{O(o,n)}),true);n.addEventListener("ionBackButton",(o=>{const e=T(n);if(e===null||e===void 0?void 0:e.backdropDismiss){o.detail.register(t,(()=>e.dismiss(undefined,q)))}}));n.addEventListener("keyup",(o=>{if(o.key==="Escape"){const o=T(n);if(o===null||o===void 0?void 0:o.backdropDismiss){o.dismiss(undefined,q)}}}))}};const A=(n,o,t,e,i)=>{const s=T(n,e,i);if(!s){return Promise.reject("overlay does not exist")}return s.dismiss(o,t)};const B=(n,o)=>{if(o===undefined){o="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"}return Array.from(n.querySelectorAll(o)).filter((n=>n.overlayIndex>0))};const T=(n,o,t)=>{const e=B(n,o).filter((n=>!k(n)));return t===undefined?e[e.length-1]:e.find((n=>n.id===t))};const G=(n=false)=>{const o=I(document);const t=o.querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");if(!t){return}if(n){t.setAttribute("aria-hidden","true")}else{t.removeAttribute("aria-hidden")}};const z=async(t,e,i,s,d)=>{var a,r;if(t.presented){return}G(true);t.presented=true;t.willPresent.emit();(a=t.willPresentShorthand)===null||a===void 0?void 0:a.emit();const c=n(t);const u=t.enterAnimation?t.enterAnimation:o.get(e,c==="ios"?i:s);const l=await M(t,u,t.el,d);if(l){t.didPresent.emit();(r=t.didPresentShorthand)===null||r===void 0?void 0:r.emit()}if(t.el.tagName!=="ION-TOAST"){C(t.el)}if(t.keyboardClose&&(document.activeElement===null||!t.el.contains(document.activeElement))){t.el.focus()}};const C=async n=>{let o=document.activeElement;if(!o){return}const t=o===null||o===void 0?void 0:o.shadowRoot;if(t){o=t.querySelector(x)||o}await n.onDidDismiss();o.focus()};const E=async(t,e,i,s,d,a,r)=>{var u,l;if(!t.presented){return false}G(false);t.presented=false;try{t.el.style.setProperty("pointer-events","none");t.willDismiss.emit({data:e,role:i});(u=t.willDismissShorthand)===null||u===void 0?void 0:u.emit({data:e,role:i});const f=n(t);const p=t.leaveAnimation?t.leaveAnimation:o.get(s,f==="ios"?d:a);if(i!==D){await M(t,p,t.el,r)}t.didDismiss.emit({data:e,role:i});(l=t.didDismissShorthand)===null||l===void 0?void 0:l.emit({data:e,role:i});c.delete(t);t.el.classList.add("overlay-hidden");t.el.style.removeProperty("pointer-events");if(t.el.lastFocus!==undefined){t.el.lastFocus=undefined}}catch(n){console.error(n)}t.el.remove();return true};const I=n=>n.querySelector("ion-app")||n.body;const M=async(n,t,e,i)=>{e.classList.remove("overlay-hidden");const s=n.el;const d=t(s,i);if(!n.animated||!o.getBoolean("animated",true)){d.duration(0)}if(n.keyboardClose){d.beforeAddWrite((()=>{const n=e.ownerDocument.activeElement;if(n===null||n===void 0?void 0:n.matches("input,ion-input, ion-textarea")){n.blur()}}))}const a=c.get(n)||[];c.set(n,[...a,d]);await d.play();return true};const N=(n,o)=>{let t;const e=new Promise((n=>t=n));S(n,o,(n=>{t(n.detail)}));return e};const S=(n,o,t)=>{const e=i=>{d(n,o,e);t(i)};i(n,o,e)};const W=n=>n==="cancel"||n===q;const $=n=>n();const _=(n,t)=>{if(typeof n==="function"){const e=o.get("_zoneGate",$);return e((()=>{try{return n(t)}catch(n){throw n}}))}return undefined};const q="backdrop";const D="gesture";export{q as B,D as G,y as a,z as b,c,E as d,N as e,b as f,T as g,f as h,W as i,l as j,g as k,p as l,v as m,m as p,_ as s,h as t};
//# sourceMappingURL=p-c03ef3ad.js.map