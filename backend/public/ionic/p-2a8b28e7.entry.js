import{r as t,e,h as i,H as n,d as s,f as o}from"./p-c36f36fa.js";import{g as r}from"./p-c57c31a3.js";import{f as a,k as l,n as c,e as d}from"./p-f08587bc.js";import{f as h,h as p,j as u}from"./p-c03ef3ad.js";import{h as f}from"./p-0e4de1d0.js";import"./p-add30d46.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
const g=(t,e,i)=>{if(typeof MutationObserver==="undefined"){return}const n=new MutationObserver((t=>{i(b(t,e))}));n.observe(t,{childList:true,subtree:true});return n};const b=(t,e)=>{let i;t.forEach((t=>{for(let n=0;n<t.addedNodes.length;n++){i=m(t.addedNodes[n],e)||i}}));return i};const m=(t,e)=>{if(t.nodeType!==1){return undefined}const i=t.tagName===e.toUpperCase()?[t]:Array.from(t.querySelectorAll(e));return i.find((e=>e.value===t.value))};const x=":host{--placeholder-color:currentColor;--placeholder-opacity:0.33;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:flex;position:relative;align-items:center;font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:2}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.in-item){position:static;max-width:45%}:host(.select-disabled){opacity:0.4;pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{position:relative}.select-text{flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.select-icon-inner{left:5px;top:50%;margin-top:-2px;position:absolute;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;color:currentColor;pointer-events:none}[dir=rtl] .select-icon-inner,:host-context([dir=rtl]) .select-icon-inner{left:unset;right:unset;right:5px}:host{--padding-top:10px;--padding-end:10px;--padding-bottom:10px;--padding-start:20px}.select-icon{width:12px;height:18px;opacity:0.33}";const v=":host{--placeholder-color:currentColor;--placeholder-opacity:0.33;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:flex;position:relative;align-items:center;font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:2}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.in-item){position:static;max-width:45%}:host(.select-disabled){opacity:0.4;pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{position:relative}.select-text{flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.select-icon-inner{left:5px;top:50%;margin-top:-2px;position:absolute;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;color:currentColor;pointer-events:none}[dir=rtl] .select-icon-inner,:host-context([dir=rtl]) .select-icon-inner{left:unset;right:unset;right:5px}:host{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:16px}.select-icon{width:19px;height:19px;transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:0.55}:host-context(.item-label-stacked) .select-icon,:host-context(.item-label-floating:not(.item-fill-outline)) .select-icon,:host-context(.item-label-floating.item-fill-outline){transform:translate3d(0,  -9px,  0)}:host-context(.item-has-focus) .select-icon{transform:rotate(180deg)}:host-context(.item-has-focus.item-label-stacked) .select-icon,:host-context(.item-has-focus.item-label-floating:not(.item-fill-outline)) .select-icon{transform:translate3d(0,  -9px,  0) rotate(180deg)}:host-context(ion-item.ion-focused) .select-icon,:host-context(.item-has-focus) .select-icon{color:var(--highlight-color-focused);opacity:1}";const y=class{constructor(i){t(this,i);this.ionChange=e(this,"ionChange",7);this.ionCancel=e(this,"ionCancel",7);this.ionDismiss=e(this,"ionDismiss",7);this.ionFocus=e(this,"ionFocus",7);this.ionBlur=e(this,"ionBlur",7);this.ionStyle=e(this,"ionStyle",7);this.inputId=`ion-sel-${$++}`;this.didInit=false;this.isExpanded=false;this.disabled=false;this.cancelText="Cancel";this.okText="OK";this.name=this.inputId;this.multiple=false;this.interface="alert";this.interfaceOptions={};this.onClick=t=>{this.setFocus();this.open(t)};this.onFocus=()=>{this.ionFocus.emit()};this.onBlur=()=>{this.ionBlur.emit()}}styleChanged(){this.emitStyle()}valueChanged(){this.emitStyle();if(this.didInit){this.ionChange.emit({value:this.value})}}async connectedCallback(){this.updateOverlayOptions();this.emitStyle();this.mutationO=g(this.el,"ion-select-option",(async()=>{this.updateOverlayOptions();o(this)}))}disconnectedCallback(){if(this.mutationO){this.mutationO.disconnect();this.mutationO=undefined}}componentDidLoad(){this.didInit=true}async open(t){if(this.disabled||this.isExpanded){return undefined}this.isExpanded=true;const e=this.overlay=await this.createOverlay(t);e.onDidDismiss().then((()=>{this.overlay=undefined;this.isExpanded=false;this.ionDismiss.emit();this.setFocus()}));await e.present();if(this.interface==="popover"){let t=this.childOpts.map((t=>t.value)).indexOf(this.value);t=t>-1?t:0;const i=e.querySelector(`.select-interface-option:nth-child(${t+1})`);if(i){a(i);const t=i.querySelector("ion-radio, ion-checkbox");if(t){t.focus()}}}return e}createOverlay(t){let e=this.interface;if(e==="action-sheet"&&this.multiple){console.warn(`Select interface cannot be "${e}" with a multi-value select. Using the "alert" interface instead.`);e="alert"}if(e==="popover"&&!t){console.warn(`Select interface cannot be a "${e}" without passing an event. Using the "alert" interface instead.`);e="alert"}if(e==="action-sheet"){return this.openActionSheet()}if(e==="popover"){return this.openPopover(t)}return this.openAlert()}updateOverlayOptions(){const t=this.overlay;if(!t){return}const e=this.childOpts;const i=this.value;switch(this.interface){case"action-sheet":t.buttons=this.createActionSheetButtons(e,i);break;case"popover":const n=t.querySelector("ion-select-popover");if(n){n.options=this.createPopoverOptions(e,i)}break;case"alert":const s=this.multiple?"checkbox":"radio";t.inputs=this.createAlertInputs(e,s,i);break}}createActionSheetButtons(t,e){const i=t.map((t=>{const i=k(t);const n=Array.from(t.classList).filter((t=>t!=="hydrated")).join(" ");const s=`${z} ${n}`;return{role:w(e,i,this.compareWith)?"selected":"",text:t.textContent,cssClass:s,handler:()=>{this.value=i}}}));i.push({text:this.cancelText,role:"cancel",handler:()=>{this.ionCancel.emit()}});return i}createAlertInputs(t,e,i){const n=t.map((t=>{const n=k(t);const s=Array.from(t.classList).filter((t=>t!=="hydrated")).join(" ");const o=`${z} ${s}`;return{type:e,cssClass:o,label:t.textContent||"",value:n,checked:w(i,n,this.compareWith),disabled:t.disabled}}));return n}createPopoverOptions(t,e){const i=t.map((t=>{const i=k(t);const n=Array.from(t.classList).filter((t=>t!=="hydrated")).join(" ");const s=`${z} ${n}`;return{text:t.textContent||"",cssClass:s,value:i,checked:w(e,i,this.compareWith),disabled:t.disabled,handler:t=>{this.value=t;if(!this.multiple){this.close()}}}}));return i}async openPopover(t){const e=this.interfaceOptions;const i=r(this);const n=i==="md"?false:true;const s=this.multiple;const o=this.value;let a=t;let l="auto";const c=this.el.closest("ion-item");if(c&&(c.classList.contains("item-label-floating")||c.classList.contains("item-label-stacked"))){a=Object.assign(Object.assign({},t),{detail:{ionShadowTarget:c}});l="cover"}const d=Object.assign(Object.assign({mode:i,event:a,alignment:"center",size:l,showBackdrop:n},e),{component:"ion-select-popover",cssClass:["select-popover",e.cssClass],componentProps:{header:e.header,subHeader:e.subHeader,message:e.message,multiple:s,value:o,options:this.createPopoverOptions(this.childOpts,o)}});return h.create(d)}async openActionSheet(){const t=r(this);const e=this.interfaceOptions;const i=Object.assign(Object.assign({mode:t},e),{buttons:this.createActionSheetButtons(this.childOpts,this.value),cssClass:["select-action-sheet",e.cssClass]});return p.create(i)}async openAlert(){const t=this.getLabel();const e=t?t.textContent:null;const i=this.interfaceOptions;const n=this.multiple?"checkbox":"radio";const s=r(this);const o=Object.assign(Object.assign({mode:s},i),{header:i.header?i.header:e,inputs:this.createAlertInputs(this.childOpts,n,this.value),buttons:[{text:this.cancelText,role:"cancel",handler:()=>{this.ionCancel.emit()}},{text:this.okText,handler:t=>{this.value=t}}],cssClass:["select-alert",i.cssClass,this.multiple?"multiple-select-alert":"single-select-alert"]});return u.create(o)}close(){if(!this.overlay){return Promise.resolve(false)}return this.overlay.dismiss()}getLabel(){return l(this.el)}hasValue(){return this.getText()!==""}get childOpts(){return Array.from(this.el.querySelectorAll("ion-select-option"))}getText(){const t=this.selectedText;if(t!=null&&t!==""){return t}return j(this.childOpts,this.value,this.compareWith)}setFocus(){if(this.focusEl){this.focusEl.focus()}}emitStyle(){this.ionStyle.emit({interactive:true,"interactive-disabled":this.disabled,select:true,"select-disabled":this.disabled,"has-placeholder":this.placeholder!==undefined,"has-value":this.hasValue(),"has-focus":this.isExpanded})}render(){const{disabled:t,el:e,inputId:s,isExpanded:o,name:a,placeholder:l,value:h}=this;const p=r(this);const{labelText:u,labelId:g}=c(e,s);d(true,e,a,C(h),t);const b=this.getText();let m=false;let x=b;if(x===""&&l!==undefined){x=l;m=true}const v={"select-text":true,"select-placeholder":m};const y=m?"placeholder":"text";const w=u!==undefined?x!==""?`${x}, ${u}`:u:x;return i(n,{onClick:this.onClick,role:"button","aria-haspopup":"listbox","aria-disabled":t?"true":null,"aria-label":w,class:{[p]:true,"in-item":f("ion-item",e),"select-disabled":t,"select-expanded":o}},i("div",{"aria-hidden":"true",class:v,part:y},x),i("div",{class:"select-icon",role:"presentation",part:"icon"},i("div",{class:"select-icon-inner"})),i("label",{id:g},w),i("button",{type:"button",disabled:t,id:s,"aria-labelledby":g,"aria-haspopup":"listbox","aria-expanded":`${o}`,onFocus:this.onFocus,onBlur:this.onBlur,ref:t=>this.focusEl=t}))}get el(){return s(this)}static get watchers(){return{disabled:["styleChanged"],placeholder:["styleChanged"],isExpanded:["styleChanged"],value:["valueChanged"]}}};const w=(t,e,i)=>{if(t===undefined){return false}if(Array.isArray(t)){return t.some((t=>O(t,e,i)))}else{return O(t,e,i)}};const k=t=>{const e=t.value;return e===undefined?t.textContent||"":e};const C=t=>{if(t==null){return undefined}if(Array.isArray(t)){return t.join(",")}return t.toString()};const O=(t,e,i)=>{if(typeof i==="function"){return i(t,e)}else if(typeof i==="string"){return t[i]===e[i]}else{return Array.isArray(e)?e.includes(t):t===e}};const j=(t,e,i)=>{if(e===undefined){return""}if(Array.isArray(e)){return e.map((e=>A(t,e,i))).filter((t=>t!==null)).join(", ")}else{return A(t,e,i)||""}};const A=(t,e,i)=>{const n=t.find((t=>O(e,k(t),i)));return n?n.textContent:null};let $=0;const z="select-interface-option";y.style={ios:x,md:v};export{y as ion_select};
//# sourceMappingURL=p-2a8b28e7.entry.js.map